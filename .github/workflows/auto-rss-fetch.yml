name: ğŸ”¥ è‡ªåŠ¨RSSæŠ“å–

on:
  schedule:
    # æ¯å¤©ä¸Šåˆ9ç‚¹ï¼ˆUTC+8 = UTC+0 - 8å°æ—¶ = 1:00 UTCï¼‰
    - cron: '0 1 * * *'
  # å…è®¸æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  fetch-rss:
    runs-on: ubuntu-latest
    name: è‡ªåŠ¨æŠ“å–RSSæº
    
    steps:
    - name: ğŸ”¥ æŠ“å–3Dæ‰“å°RSS
      run: |
        curl -X POST '${{ secrets.SUPABASE_URL }}/functions/v1/fetch-rss' \
          -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
          -H 'Content-Type: application/json' \
          -d '{
            "rssUrl": "https://news.google.com/rss/search?q=3D+printing&hl=zh-CN&gl=CN&ceid=CN:zh-Hans",
            "sourceName": "3D Print",
            "verticalName": "3Dæ‰“å°"
          }'
    
    - name: ğŸ”¥ æŠ“å–SEO RSS
      run: |
        curl -X POST '${{ secrets.SUPABASE_URL }}/functions/v1/fetch-rss' \
          -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
          -H 'Content-Type: application/json' \
          -d '{
            "rssUrl": "https://news.google.com/rss/search?q=SEO&hl=zh-CN&gl=CN&ceid=CN:zh-Hans",
            "sourceName": "SEO News",
            "verticalName": "SEO"
          }'
    
    - name: ğŸ”¥ æŠ“å–å†œä¸šç§‘æŠ€RSS
      run: |
        curl -X POST '${{ secrets.SUPABASE_URL }}/functions/v1/fetch-rss' \
          -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
          -H 'Content-Type: application/json' \
          -d '{
            "rssUrl": "https://news.google.com/rss/search?q=å†œä¸šæœºå™¨äºº&hl=zh-CN&gl=CN&ceid=CN:zh-Hans",
            "sourceName": "AgriTech",
            "verticalName": "å†œä¸šç§‘æŠ€"
          }'
    
    - name: ğŸ”¥ æŠ“å–æ™ºæ…§å†œä¸šRSS
      run: |
        curl -X POST '${{ secrets.SUPABASE_URL }}/functions/v1/fetch-rss' \
          -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
          -H 'Content-Type: application/json' \
          -d '{
            "rssUrl": "https://news.google.com/rss/search?q=Smart+Agriculture&hl=en&gl=US&ceid=US:en",
            "sourceName": "Smart Agriculture",
            "verticalName": "æ™ºæ…§å†œä¸š"
          }'
    
    - name: ğŸ”¥ æŠ“å–å¢æåˆ¶é€ RSS
      run: |
        curl -X POST '${{ secrets.SUPABASE_URL }}/functions/v1/fetch-rss' \
          -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
          -H 'Content-Type: application/json' \
          -d '{
            "rssUrl": "https://news.google.com/rss/search?q=additivemanufacturing&hl=en&gl=US&ceid=US:en",
            "sourceName": "Additive Manufacturing",
            "verticalName": "å¢æåˆ¶é€ "
          }'
    
    - name: ğŸ“Š æŠ“å–å®Œæˆé€šçŸ¥
      run: |
        echo "âœ… æ‰€æœ‰RSSæºæŠ“å–å®Œæˆï¼"
        echo "â° æŠ“å–æ—¶é—´: $(date)"